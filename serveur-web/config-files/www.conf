# Fichier de configuration du site statique www
# Source : https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-server-blocks-virtual-hosts-on-ubuntu-16-04
# Source : https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-to-use-custom-error-pages-on-ubuntu-14-04

server {
	# Cette ligne de commande dit au serveur NGINX d'écouter sur le port 80
	listen 80;

	# Nom du serveur NGINX
	server_name www.l1-2.ephec-ti.be;

	# Cette ligne de code spécifie la racine du document. Elle pointe vers la racine du document du site correspondant (www)
	root /usr/share/nginx/www;
	index index.html;

	# La directive 'error_page' est utilisée lorsqu'une erreur 404 se produit (lorsqu'un fichier demandé n'est pas trouvé).
	# La page personnalisée correspondant aux erreurs se trouveront dans un fichier error.html
	error_page 404 /error.html;

	# Définir le chemin vers cette page web error.html
	location = /error.html {
		root /usr/share/nginx/html;
	}

	location / {
		# La ligne de commande ci-dessous permet de redirigé la requête vers un 404 en cas de non-existance
		# Autre explication : (First attempt to serve request as file ($uri), then directory ($uri/), then fall back to displaying a 404.
		try_files $uri $uri/ =404;
	}
}
